# Walkthrough: `conform` 採用とバリデーション責務の決定

## 背景
- Web（Remix）だけの構成で、作問/編集などフォームが多い。
- 「必須項目不足」「文字数制限」「重複選択肢」などのエラーを、UI で分かりやすく出したい。

## 決定
- フォーム実装は `conform` を採用する。
- 入力検証スキーマは `zod` を採用する。

## 役割分担（重要）
- **Remix（action/loader）**: 一次検証（UX向け）
  - `zod` で入力を検証し、`conform` を使ってフィールド単位のエラーをフォームに返す。
  - 例: 「タイトルは50文字まで」「必須項目が不足」「同じ選択肢が2つ以上」など。
- **Backend（Go）**: 最終防衛（整合性/認可）
  - Remix を信頼せず、整合性・認可・ドメイン不変条件を必ず検証する。
  - 例: 選択肢4つ、正解が選択肢内、重複選択肢禁止、所有者チェック、DB制約など。

## 更新したドキュメント
- `docs/tech.md`: `zod` + `conform` 採用、バリデーション方針（Remix一次検証 + Backend最終防衛）を追記
- `docs/design.md`: 入力検証の責務分担を明文化
- `docs/structure.md`: スキーマ配置と `conform` の運用方針を追記
